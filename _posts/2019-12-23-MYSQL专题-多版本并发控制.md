---
layout:     post
title:	MYSQL专题
subtitle: 	多版本并发控制
date:       2019-12-23
author:     chuangkel
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 数据库
---

# 多版本并发控制

行锁设计的目的是为了提升的并发性能，而多版本控制（MVCC）是为了得到更高的并发性能。可以说多版本控制（MVCC）就是行锁的变种。每一行都有两列隐藏的字段创（创建时间和删除时间），创建时间记录的是一个版本号，删除时间也是一个版本号。多版本控制是通过复制当前行，版本号加一。

Select时只能查询到小于等于当前事务版本号的行，并且当删除时间为空或者大于当前版本号的行。

Insert为新插入的行保存当前系统版本号为最新的行的版本号。

Update为插入一行新纪录，保存当前系统版本号为新记录行版本号，同时保存当前系统版本号为原来行的删除记录的版本号。

Delete为删除的每一个行保存当前系统版本号为删除的每一行的行版本号。